<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste perfil de viagem</title>
    <link rel="icon" href="./imgs/logo2.png">
    <link rel="stylesheet" href="./styles/header.css">
    <link rel="stylesheet" href="./styles/footer.css">
    <link rel="stylesheet" href="./styles/seletorPais.css">
</head>
<body>
    <header>
        <div class="logo"><a id="iconeDirecionamento" href="./home.html">
            <img src="./imgs/logoSemFundo.png" alt="Logo">
          </a> </div>
        <nav class="navbar">
          <a id="perfilViajanteHeader" href="./seletorPais.html">PERFIL DE VIAJANTE</a>
          <a id="inicio" href="./home.html">INÍCIO</a>
          <a href="./descubra.html">DESCUBRA</a>
          <a id="sobreDev" href="sobreDevLogado.html">SOBRE O DEV</a>
        </nav>
      </header>

<section class="banner">    
    
    <div class="box pergunta1" style="display: block;" id="div_pergunta1">
    <img src="./imgs/machupicchu2.jpg" class="imagem">
    <p class="pergunta">O que mais te atrai ao planejar uma viagem?</p>
    <button onclick="resposta('a1')">Explorar trilhas, cachoeiras e viver experiências emocionantes.</button> <br>
    <button onclick="resposta('b1')">Visitar museus, locais históricos e aprender sobre a cultura local.</button> <br>
    <button onclick="resposta('c1')">Ficar em hotéis 5 estrelas, com serviços de luxo e exclusividade.</button> <br>
    <button onclick="resposta('d1')">Descobrir formas criativas de economizar e maximizar a viagem com baixo custo.</button> <br>
</div>

<div class="box pergunta2" style="display: none;" id="div_pergunta2">
    <img src="./imgs/transporteImg.jpeg" class="imagem">
    <p class="pergunta">Qual seria sua escolha de hospedagem ideal?</p>
    <button onclick="resposta('a2')">Uma cabana rústica no meio da natureza ou uma barraca em um camping.</button> <br>
    <button onclick="resposta('b2')">Uma pousada charmosa no centro histórico ou perto de locais culturais.</button> <br>
    <button onclick="resposta('c2')">Uma pousada charmosa no centro histórico ou perto de locais culturais.</button> <br>
    <button onclick="resposta('d2')">Um hostel aconchegante e econômico ou uma casa alugada por temporada.</button> <br>
</div>

<div class="box pergunta3" style="display: none;" id="div_pergunta3">
    <img src="./imgs/dinheiroImg.jpg" class="imagem">
    <p class="pergunta">Como você prefere organizar seu itinerário?</p>
    <button onclick="resposta('a3')">Pouco planejamento, deixando espaço para aventuras e surpresas</button> <br>
    <button onclick="resposta('b3')">Um roteiro detalhado com visitas a locais culturais e eventos típicos.</button> <br>
    <button onclick="resposta('c3')">Contratar guias privados e aproveitar experiências exclusivas e personalizadas.</button> <br>
    <button onclick="resposta('d3')">Procurar dicas de viagens econômicas e ajustar tudo para caber no orçamento.</button> <br>
</div>

<div class="box pergunta4" style="display: none;" id="div_pergunta4">
    <img src="./imgs/hospedagem.webp" class="imagem">
    <p class="pergunta">O que você considera indispensável durante a viagem?</p>
    <button onclick="resposta('a4')">Equipamentos para atividades ao ar livre, como tênis de trilha e mochila.</button> <br>
    <button onclick="resposta('b4')">Um bom guia ou audioguia para explorar pontos culturais e históricos.</button> <br>
    <button onclick="resposta('c4')">Conforto, refeições sofisticadas e experiências de alto padrão.</button> <br>
    <button onclick="resposta('d4')">Lanches caseiros e cupons de desconto para reduzir os custos.</button> <br>
</div>
</section>

<footer>
    <div class="footer-section">
        <h3>Institucional:</h3>
        <ul>
            <li><a id="sobreFooter" href="./sobreDevLogado.html">Sobre o autor/dev</a></li>
        </ul>
    </div>
    <div class="footer-section">
        <h3>Conteúdo para você:</h3>
        <ul>
            <li><a href="./descubra.html">Guia de destinos</a></li>
        </ul>
    </div>
</footer>
</body>
</html>
<script>


    const respostasUsuarios = []
    
    let resposta1  = ""
    let resposta2 = ""
    let resposta3 = ""
    let resposta4 = ""
    let textoInicio = inicio
    let sobreMim = sobreDev

    if(sessionStorage.ID_USUARIO == null){
        textoInicio.href = './index.html'
        sobreMim.href ='./sobreDev.html'
    }
    
    function resposta(escolhaUsuario){
        
        const pergunta1 =  div_pergunta1.style
        const pergunta2 = div_pergunta2.style
        const pergunta3 = div_pergunta3.style
        const pergunta4 = div_pergunta4.style


        if(
            escolhaUsuario == "a1" ||
            escolhaUsuario == "b1" ||
            escolhaUsuario == "c1" ||
            escolhaUsuario == "d1"
        ){
            pergunta1.display = 'none'
            pergunta2.display = 'block'

            resposta1 = escolhaUsuario

            respostasUsuarios.push(escolhaUsuario)
        }

        if(
            escolhaUsuario == "a2" ||
            escolhaUsuario == "b2" ||
            escolhaUsuario == "c2" ||
            escolhaUsuario == "d2"
        ){
            pergunta2.display = 'none'
            pergunta3.display = 'block'
            respostasUsuarios.push(escolhaUsuario)

            resposta2 = escolhaUsuario
        }

        if(
            escolhaUsuario == "a3" ||
            escolhaUsuario == "b3" ||
            escolhaUsuario == "c3" ||
            escolhaUsuario == "d3"
        ){
            pergunta3.display = 'none'
            pergunta4.display = 'block'
            respostasUsuarios.push(escolhaUsuario)

            resposta3 = escolhaUsuario
        }

        if(
            escolhaUsuario == "a4" ||
            escolhaUsuario == "b4" ||
            escolhaUsuario == "c4" ||
            escolhaUsuario == "d4"
        ){
            pergunta4.display = 'block'
            respostasUsuarios.push(escolhaUsuario)

            resposta4 = escolhaUsuario

            inserirRespostas();
              return window.location.href = "./dashBoard.html"
        }
    }
    
    function inserirRespostas() {
        var idUsuario = JSON.parse(sessionStorage.ID_USUARIO)

        fetch("/dash/inserirRespostas", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                pergunta1Server:resposta1,
                pergunta2Server:resposta2,
                pergunta3Server:resposta3,
                pergunta4Server:resposta4,
                idUsuarioServer:idUsuario
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    console.log("resposta registrada")
                } else {
                    throw "Houve um erro ao tentar realizar o cadastro!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

    }

</script>